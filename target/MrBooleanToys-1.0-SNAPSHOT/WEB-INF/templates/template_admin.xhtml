<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:head>
        <h:outputStylesheet name="/css/index.css"/>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"/>
        <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
        <f:event type="preRenderView" listener="#{menuController.verificarSesionAdmin()}"/>
    </h:head>

    <h:body>

        <div id="top">
            <ui:insert name="top">
                <nav class="navbar navbar-expand-sm" id="navi_bar">
                    <a class="navbar-brand" href="index.html">
                        <p:graphicImage id="logo" name="logo_small.png" library="images"/>
                    </a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <p:graphicImage class="navbar-toggler-icon" name="desplegable.png" library="images"/>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" href="principal_admin.xhtml">Inicio</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
                                    Categorías
                                </a>
                                <div class="dropdown-menu" id="dropdown_menu">
                                    <h:form>
                                        <p:commandLink class="dropdown-item" value="Figuras" actionListener="#{categoriaController.redirectCategorias('Figuras')}"/>
                                        <p:commandLink class="dropdown-item" value="Coches" actionListener="#{categoriaController.redirectCategorias('Coches')}"/>
                                        <p:commandLink class="dropdown-item" value="Construcción" actionListener="#{categoriaController.redirectCategorias('Construcción')}"/>
                                        <p:commandLink class="dropdown-item" value="Peluches" actionListener="#{categoriaController.redirectCategorias('Peluches')}"/>
                                        <p:commandLink class="dropdown-item" value="Puzles" actionListener="#{categoriaController.redirectCategorias('Puzles')}"/>
                                        <p:commandLink class="dropdown-item" value="Aire Libre" actionListener="#{categoriaController.redirectCategorias('Aire Libre')}"/>
                                    </h:form>                          
                                </div>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="adm_clientes.xhtml">Usuarios</a>
                            </li>
                        </ul>
                    </div>
                    <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" href="#"><p:graphicImage id="cart" name="carrito.png" library="images"/></a>
                            </li>
                            <li class="nav-item">
                                <h:form>
                                    <p:outputLabel class="nav-link" value="Administrador: #{menuController.cliente_sesion.nombre}" 
                                                   rendered="#{menuController.cliente_sesion.tipo eq 'a'}"  />
                                    <p:outputLabel class="nav-link" value="Cliente: #{menuController.cliente_sesion.nombre}" 
                                                   rendered="#{menuController.cliente_sesion.tipo eq 'c'}"  />
                                </h:form>
                            </li>
                            <li class="nav-item">
                                <h:form>
                                    <p:commandButton class ="nav-link" onclick="PF('wlogout').show();" icon="ui-icon-power"/>
                                </h:form>
                            </li>
                        </ul>
                    </div>
                </nav>

                <!--mensaje de confirmaciones etc.-->
                <p:growl autoUpdate="true" class="ui-growl-image-warn" showDetail="true" showSummary="false"/>
                <p:dialog id="logout_dialog" widgetVar="wlogout" draggable="false" resizable="false" closeOnEscape="true" 
                          modal="true" showEffect="slide" hideEffect="explode">
                    <h:form>
                        <p:fieldset legend="Desconexión">
                            <p:panelGrid columns="2">
                                <f:facet name="header">
                                    ¿Está usted seguro?
                                </f:facet>

                                <p:commandButton value="Sí" icon="ui-icon-yes" actionListener="#{menuController.cerrarSesion()}"/>
                                <p:commandButton value="No" icon="ui-icon-no" onclick="PF('wlogout').hide();"/>

                                <f:facet name="footer"/>
                            </p:panelGrid> 
                        </p:fieldset> 
                    </h:form>
                </p:dialog>
            </ui:insert>
        </div>

        <div id="content" class="center_content">
            <ui:insert name="content"></ui:insert>
        </div>

        <div id="bottom">
            <ui:insert name="bottom">
                <footer class="container-fluid bg-footer justify-contennt-center" id="footer" style="position:fixed; bottom:0">
                    <p id="p_foot">Copyright Mr Boolean Toys. All rights reserved.</p>
                </footer>
            </ui:insert>
        </div>

    </h:body>

</html>

